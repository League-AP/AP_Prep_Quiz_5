<html>
<head>
            <title>League AP Prep - Quiz 5</title>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://league-central.github.io/curriculum/style/style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
        <style>
            #quiz {
                margin-left:50px;
            }
            #nav {
                margin-left:50px;
                position: relative;
            }
            #footer {
                position: absolute;
                bottom: -100;
                width: 100%;
            }
            button {background-color:yellow; border-radius: 3px; font-size: 125%;
            }
            code {font-size: 125%; color: forestgreen}
        </style>
        <script src="https://league-central.github.io/curriculum/script/headerAndFooter.js"></script>
</head>
<div id="header">
	<center> <h1>
		Program Design Quiz
	</h1>    <br>
    <hr>
    <br></center>
</div>
<div id="quiz"></div>
<div id="nav">
    <div id="footer"></div>
</div>

<script>

var totalQuestions;

var qDiv;
var navDiv;

var currentQuestion;
var questions = [];
var qIndex = 0;

var quizComplete = false;
var score = 0;

function Question(){
	this.type;
	this.number;
	this.question;
	this.choices = [];
	this.correctAnswers = [];
	this.userAnswers = [];
	this.isCorrect = false;
}

window.onload = function(){
	qDiv = document.getElementById('quiz');
	navDiv = document.getElementById('nav');
	buildQuiz();

	navDiv.innerHTML += "NAVIGATION:<br>";
	for(var i = 0; i < totalQuestions; i++){
		navDiv.innerHTML += "<button onclick='navigateTo("+i+")'>"+(i + 1)+"</button>";
	}
	navDiv.innerHTML += "<br><br>";
	navDiv.innerHTML += "<button onclick='submitQuiz()'>Submit Quiz</button><br>";

    addFooter();
}

function buildQuiz(){

questions[qIndex] = new Question();
questions[qIndex].number=qIndex+1;
questions[qIndex].type="SING_ANS";
questions[qIndex].question="A programmer is designing a program to catalog all books in a library. He plans to have a Book class that stores features of each book: author, title, isOnShelf, and so on, with operations like getAuthor, getTitle, getShelfInfo, and setShelfInfo. Another class, LibraryList, will store an array of Book objects. The LibraryList class will include operations such as listAllBooks, addBook, removeBook, and searchForBook. The programmer plans to implement and test the Book class first, before implementing the LibraryList class. The program- mer’s plan to write the Book class first is an example of<br><br>";

questions[qIndex].choices[0]="&nbsp;&nbsp;&nbsp;top-down development";
questions[qIndex].choices[1]="&nbsp;&nbsp;&nbsp;bottom-up development";
questions[qIndex].choices[2]="&nbsp;&nbsp;&nbsp;procedural abstraction";
questions[qIndex].choices[3]="&nbsp;&nbsp;&nbsp;information hiding";
questions[qIndex].choices[4]="&nbsp;&nbsp;&nbsp;a driver program";

    questions[qIndex].correctAnswers=1;

qIndex=qIndex+1;
questions[qIndex] = new Question();
questions[qIndex].number=qIndex+1;
questions[qIndex].type="SING_ANS";
questions[qIndex].question="A method is to be written to search an array for a value that is larger than a given item and return its index. The problem specification does not indicate what should be returned if there are several such values in the array. Which of the following actions would be best?<br>";


questions[qIndex].choices[0]="&nbsp;&nbsp;&nbsp;The method should be written on the assumption that there is only one value in the array that is larger than the given item";
questions[qIndex].choices[1]="&nbsp;&nbsp;&nbsp;The method should be written so as to return the index of every occurrence of a larger value";
questions[qIndex].choices[2]="&nbsp;&nbsp;&nbsp;The specification should be modified to indicate what should be done if there is more than one index of larger values.";
questions[qIndex].choices[3]="&nbsp;&nbsp;&nbsp;The method should be written to output a message if more than one larger value is found";
questions[qIndex].choices[4]="&nbsp;&nbsp;&nbsp;The method should be written to delete all subsequent larger items after a suitable index is returned";

    questions[qIndex].correctAnswers=2;

qIndex=qIndex+1;
questions[qIndex] = new Question();
questions[qIndex].number=qIndex+1;
questions[qIndex].type="SING_ANS";
questions[qIndex].question="<code>public class Searcher {<br>&nbsp;&nbsp;&nbsp;private int[] arr;<br><br>&nbsp;&nbsp;&nbsp;/** Constructor. Initializes arr with integers. */<br>&nbsp;&nbsp;&nbsp;public Searcher()<br>&nbsp;&nbsp;&nbsp;{ /* implementation not shown */ }<br><br>&nbsp;&nbsp;&nbsp;/**Precondition: arr[first]...arr[last] sorted in ascending order.<br>&nbsp;&nbsp;&nbsp; * Postcondition: Returns index of key in arr. If key not in arr, <br>&nbsp;&nbsp;&nbsp; * returns -1.&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;public int search(int first, int last, int key) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int mid;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (first &lt;= last) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mid = (first + last) / 2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (arr[mid] == key)&nbsp;&nbsp;&nbsp;//found key, exit search<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return mid;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if (arr[mid] &lt; key) //key to right of arr[mid]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first = mid + 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last = mid - 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return -1&nbsp;&nbsp;&nbsp;//key not in list<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;}<br></code><br>Which assertion is true just before each execution of the while loop?<br>";

questions[qIndex].choices[0]="&nbsp;&nbsp;&nbsp;<code>arr[first] &lt; key &lt; arr[last]</code>";
questions[qIndex].choices[1]="&nbsp;&nbsp;&nbsp;<code>arr[first] &lt;= key &lt;= arr[last]</code>";
questions[qIndex].choices[2]="&nbsp;&nbsp;&nbsp;<code>arr[first] &lt; key &lt; arr[last] or key is not in arr</code>";
questions[qIndex].choices[3]="&nbsp;&nbsp;&nbsp;<code>arr[first] &lt;= key &lt;= arr[last] or key is not in arr</code>";
questions[qIndex].choices[4]="&nbsp;&nbsp;&nbsp;<code>key &lt;= arr[first] or key &gt;= arr[last] or key is not in arr</code>";

questions[qIndex].correctAnswers=3;

qIndex=qIndex+1;
questions[qIndex] = new Question();
questions[qIndex].number=qIndex+1;
questions[qIndex].type="SING_ANS";
questions[qIndex].question="A programmer plans to write a program that simulates a small bingo game (no more than six players). Each player will have a bingo card with 20 numbers from 0 to 90 (no duplicates). Someone will call out numbers one at a time, and each player will cross out a number on his card as it is called. The first player with all the numbers crossed out is the winner. In the simulation, as the game is in progress, each player’s card is displayed on the screen.<br><br>The programmer envisions a short driver class whose main method has just two statements:<br><br><code>BingoGame b = new BingoGame();<br> b.playBingo();</code><br><br>The BingoGame class will have several objects: a Display, a Caller, and a PlayerGroup. The PlayerGroup will have a list of Players, and each Player will have a BingoCard.<br><br>The relationship between the PlayerGroup and Player classes is an example of<br>";

questions[qIndex].choices[0]="&nbsp;&nbsp;&nbsp;an interface";
questions[qIndex].choices[1]="&nbsp;&nbsp;&nbsp;encapsulation";
questions[qIndex].choices[2]="&nbsp;&nbsp;&nbsp;composition";
questions[qIndex].choices[3]="&nbsp;&nbsp;&nbsp;inheritance";
questions[qIndex].choices[4]="&nbsp;&nbsp;&nbsp;independent classes";

questions[qIndex].correctAnswers=2;


	totalQuestions = qIndex+1;
	currentQuestion = questions[0];
	displayQuestion();
}

function displayQuestion(){
	qDiv.innerHTML = "Question " + currentQuestion.number + ":<br><br>";
	qDiv.innerHTML += currentQuestion.question + "<br>";
	if(currentQuestion.type == "MULT_ANS"){
		qDiv.innerHTML += "<br>	(choose all that apply)<br>";

		for(var i = 0; i < currentQuestion.choices.length; i++){
            qDiv.innerHTML += "&nbsp;" + numToChar(i) + ":&nbsp;&nbsp;";
			if(currentQuestion.userAnswers.includes(i)){
				qDiv.innerHTML += "<input type='checkbox' checked></input>";
			}else{
				qDiv.innerHTML += "<input type='checkbox'></input>";
			}


			qDiv.innerHTML += currentQuestion.choices[i] + "<br>";

		}

		if(quizComplete){
			qDiv.innerHTML += "<b>Correct Answer:</b><br>";
			for(var j = 0; j < currentQuestion.correctAnswers.length; j++){
				qDiv.innerHTML += currentQuestion.choices[currentQuestion.correctAnswers[j]] + "<br><br>";
			}
			qDiv.innerHTML += "<b>Your Answer:</b><br>";
			for(var j = 0; j < currentQuestion.userAnswers.length; j++){
				qDiv.innerHTML += currentQuestion.choices[currentQuestion.userAnswers[j]] + "<br><br>";
			}
		}

	}else if(currentQuestion.type == "SING_ANS"){

		for(var i = 0; i < currentQuestion.choices.length; i++){
			qDiv.innerHTML += numToChar(i) + ":&nbsp;&nbsp;";

			if(currentQuestion.userAnswers == i){
				qDiv.innerHTML += "<input type='radio' name='q"+currentQuestion.number+"' checked></input>";
			}else{
				qDiv.innerHTML += "<input type='radio' name='q"+currentQuestion.number+"'></input>";
			}
			qDiv.innerHTML += currentQuestion.choices[i] + "<br>";

		}

		if(quizComplete){
			qDiv.innerHTML += "<b>Correct Answer:</b><br>";
			qDiv.innerHTML += currentQuestion.choices[currentQuestion.correctAnswers] + "<br><br>";

			qDiv.innerHTML += "<b>Your Answer:</b><br>";
			qDiv.innerHTML += currentQuestion.choices[currentQuestion.userAnswers] + "<br><br>";
		}
	}else if(currentQuestion.type == "FILL_IN"){
		qDiv.innerHTML += "<textarea rows='7' cols='60'>"+currentQuestion.userAnswers+"</textarea>";
		if(quizComplete){
			qDiv.innerHTML += "<br><b>Correct Answer:</b><br>";
			qDiv.innerHTML += currentQuestion.correctAnswers + "<br><br>";

			qDiv.innerHTML += "<b>Your Answer:</b><br>";
			qDiv.innerHTML += currentQuestion.userAnswers + "<br><br>";
		}
	}
	qDiv.innerHTML += "<br>";

	if(currentQuestion.number != 1){
		qDiv.innerHTML += "<button onclick='previousQuestion()'>Previous Question</button>";
	}
    if (currentQuestion.number >1 && currentQuestion.number < questions.length) {
        qDiv.innerHTML += "&nbsp;&nbsp;&nbsp;&nbsp;"
    }
    if(currentQuestion.number != questions.length){
		qDiv.innerHTML += "<button onclick='nextQuestion()'>Next Question</button>";
	}

	qDiv.innerHTML += "<hr size='3'>";
}

function submitQuiz(){
	if(quizComplete) return;
	if(!confirm("Are you sure you want to submit your quiz for grading?")) return;
	quizComplete = true;
	saveQuestionState();

	scoreQuiz();
	highlightButtons();

	currentQuestion = questions[0];
	displayQuestion();
}

function specialParseStr(str){
	var nstr = "";
	for(var i = 0; i < str.length; i++){
		var c = str.charAt(i);
		if(c == '\"'){
			nstr += "\\\"";
		}else if(c == '<'){
			nstr += "&lt";
		}else if(c == '\n' || c == ' '){

		}else{
			nstr += c;
		}
	}
	return nstr.trim();
}

function scoreQuiz(){
	for(var i = 0; i < questions.length; i++){
		if(questions[i].type == "MULT_ANS"){
			var ca = compareArray(questions[i].correctAnswers, questions[i].userAnswers);
			questions[i].isCorrect = ca;
			if(ca) score++;
		}else if(questions[i].type == "SING_ANS"){
			if(questions[i].correctAnswers == questions[i].userAnswers){
				questions[i].isCorrect = true;
				score++;
			}
		}else if(questions[i].type == "FILL_IN"){
			if(specialParseStr(questions[i].correctAnswers) == specialParseStr(questions[i].userAnswers)){
				questions[i].isCorrect = true;
				score++;
			}
		}
	}

	score /= totalQuestions;
	score *= 100;

	var hdr = document.getElementById("header");
	hdr.innerHTML += "<center><h1><b>Score: "+score.toFixed(2)+"%</b></h1></center>";
}

function nextQuestion(){
	saveQuestionState();
	currentQuestion = questions[currentQuestion.number];
	displayQuestion();
}

function previousQuestion(){
	saveQuestionState();
	currentQuestion = questions[currentQuestion.number - 2];
	displayQuestion();
}

function navigateTo(i){
	saveQuestionState();
	currentQuestion = questions[i];
	displayQuestion();
}

function highlightButtons(){
	var btns = navDiv.getElementsByTagName("button");
	for(var i = 0; i < questions.length; i++){
		if(questions[i].isCorrect){
			btns[i].style="background-color:green";
		}else{
			btns[i].style="background-color:red";
		}
	}
}

function saveQuestionState(){
	if(currentQuestion.type == "MULT_ANS"){
		currentQuestion.userAnswers = [];
		var cbx = qDiv.getElementsByTagName("input");
		for(var i = 0; i < cbx.length; i++){
			if(cbx[i].checked){
				currentQuestion.userAnswers.push(i);
			}
		}
	}else if(currentQuestion.type == "SING_ANS"){
		currentQuestion.userAnswers = [];
		var cbx = qDiv.getElementsByTagName("input");
		for(var i = 0; i < cbx.length; i++){
			if(cbx[i].checked){
				currentQuestion.userAnswers = i;
			}
		}
	}else if(currentQuestion.type == "FILL_IN"){
		var tbx = qDiv.getElementsByTagName("textarea");
		currentQuestion.userAnswers = tbx[0].value;
	}
}

function numToChar(num){
	return String.fromCharCode("A".charCodeAt(0) + num);
}

function compareArray(arr1, arr2){
	if(arr1.length != arr2.length){
		return false;
	}

	for(var i = 0; i < arr1.length; i++){
		if(arr1[i] != arr2[i]){
			return false;
		}
	}

	return true;
}

</script>

</html>
